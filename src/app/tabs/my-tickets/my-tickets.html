<div class="flex flex-col items-center justify-center gap-4 p-4">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="text-white text-center py-8">
    <div class="spinner mx-auto mb-4"></div>
    <p>Loading your tickets...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage && !isLoading" class="w-full max-w-[1200px] bg-red-500/20 border border-red-500 text-red-400 p-4 rounded-xl">
    {{ errorMessage }}
    <button (click)="loadTickets()" class="ml-4 underline hover:text-red-300">Try again</button>
  </div>

  <!-- Empty State -->
  <div *ngIf="!isLoading && !errorMessage && tickets.length === 0" class="text-white text-center py-8">
    <p class="text-xl mb-2">No tickets found</p>
    <p class="text-gray-400">Book a ticket to see it here</p>
  </div>

  <!-- Tickets List -->
  <div *ngFor="let ticket of tickets"
       class="ticket-card w-full max-w-[1200px] bg-[#0d3d32]/95 rounded-2xl p-6 text-white shadow-lg border-2 border-[#1a5d4a] transition-colors duration-300 hover:border-[#00BC7D]">
      <!-- Header: Status Badge and Ticket ID -->
      <div class="flex justify-between items-start mb-4">
        <div class="flex items-center gap-2">
          <span [class]="
            ticket.status === 'active' ? 'bg-[#00BC7D]' :
            ticket.status === 'used'   ? 'bg-[#1E90FF]' :
                                         'bg-gray-500'
          " class="px-3 py-1 rounded-full text-sm font-semibold capitalize">
            {{ticket.status}}
          </span>
          <span class="text-sm text-gray-400">#{{ticket.id}}</span>
          <span class="px-2 py-0.5 rounded-full text-xs font-semibold bg-[#00BC7D]/20 text-[#00F5A0] capitalize">
            {{ticket.category}}
          </span>
        </div>
        <div class="text-right">
          <div class="text-3xl font-bold text-[#00F5A0]">{{ticket.price}} EGP</div>
        </div>
      </div>


      <!-- Route -->
      <div class="text-2xl font-semibold mb-5 text-white">
        {{ticket.fromPlace}} <span class="text-[#00BC7D]">â†’</span> {{ticket.toPlace}}
      </div>

      <!-- Description -->
      <div *ngIf="ticket.description" class="text-gray-400 text-sm mb-4">
        {{ticket.description}}
      </div>

      <!-- Details: Created Date -->
      <div class="flex justify-start items-center mb-5 gap-8">
        <div>
          <div class="flex items-center gap-2 text-[#00F5A0] mb-1">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            <span class="text-sm">Created</span>
          </div>
          <div class="font-semibold">{{formatDate(ticket.createdAt)}}</div>
        </div>
      </div>

      <!-- QR Code Button -->
      <button class="w-full bg-white text-[#00BC7D] font-semibold py-3 rounded-lg transition-colors duration-300 hover:bg-[#00BC7D] hover:text-white">
        View QR Code
      </button>
    </div>
</div>
